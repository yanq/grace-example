group 'xyz.itbang'
version '0.1'

apply plugin: 'groovy'
apply plugin: 'java'
apply plugin: 'war'
//apply plugin: 'application'

sourceCompatibility = 1.8
//mainClassName = "org.gradle.sample.Main"

repositories {
    maven { url 'http://maven.aliyun.com/nexus/content/groups/public/' }
    mavenCentral()
}

sourceSets {
    main {
        groovy {
            srcDir "grace-app/controllers"
            srcDir "grace-app/interceptors"
            srcDir "grace-app/views"
        }
    }
}

dependencies {
    compile project(':grace')
    compile 'org.codehaus.groovy:groovy-all:2.5.1'
    compile 'io.undertow:undertow-servlet:2.0.13.Final'
    compile 'javax.servlet:javax.servlet-api:4.0.1'
    compile 'org.slf4j:slf4j-api:1.7.22'

    compile 'com.github.jknack:handlebars:4.1.0'
    compile 'org.thymeleaf:thymeleaf:3.0.9.RELEASE'

    runtime 'ch.qos.logback:logback-classic:1.2.1'

    testCompile group: 'junit', name: 'junit', version: '4.12'
}


task runApp(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath

    classpath.each {
        //println it.absolutePath
    }

    println buildDir

    main = 'Application'
    // arguments to pass to the application
    args allJvmArgs

    println new File('.').absolutePath
}

task grace(type: Copy) {
    into "$buildDir/grace"
    from sourceSets.main.runtimeClasspath
}